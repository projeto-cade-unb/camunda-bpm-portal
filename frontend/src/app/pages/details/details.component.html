<div
  class="flex gap-3"
  *ngIf="processDefinition$ | async as processDefinitions"
>
  <div class="w-48 shadow-sm h-full sticky top-0 mr-4">
    <button [routerLink]="['../']" class="btn btn-info">
      <span class="glyphicon glyphicon-arrow-left"></span>
    </button>

    <hr />

    <div
      class="w-full"
      [appViewer]="processDefinitions.definitionDocumentation.at(0).diagram"
      (elementClick)="scrollToElementById($event)"
    ></div>

    <hr />

    <div class="btn-group-vertical block" role="group">
      <div
        *ngFor="
          let documentation of processDefinitions.definitionDocumentation.at(0)
            .documentation
        "
        class="btn btn-default text-ellipsis whitespace-nowrap overflow-hidden"
        [class.active]="selectedDocumentation === documentation.id"
        [id]="documentation.id"
        (click)="scrollToElementById(documentation.id)"
      >
        {{ documentation.name || documentation.id }}
      </div>
    </div>
  </div>

  <div
    class="h-full"
    *ngFor="let processDefinition of processDefinitions.definitionDocumentation"
  >
    <app-share-dialog></app-share-dialog>

    <app-authorize-menu
      [processDefinition]="processDefinition"
    ></app-authorize-menu>

    <div
      [appViewer]="processDefinition.diagram"
      (elementClick)="scrollToElementById($event)"
      style="height: 22em"
    ></div>

    <ng-container *ngFor="let documentation of processDefinition.documentation">
      <h2
        [class.active]="selectedDocumentation === documentation.id"
        [id]="documentation.id"
      >
        {{ documentation.name }}
      </h2>

      <p
        *ngIf="documentation.documentation"
        [innerHTML]="
          domSanitizer.bypassSecurityTrustHtml(documentation.documentation)
        "
      ></p>

      <div
        *ngIf="documentation.extendedDocumentation"
        [innerHTML]="
          domSanitizer.bypassSecurityTrustHtml(
            documentation.extendedDocumentation
          )
        "
      ></div>

      <small *ngIf="documentation.id"
        ><b>{{ "ELEMENT_DETAIL_NAME" | translate }}</b
        >{{ documentation.id }}<br
      /></small>

      <small *ngIf="documentation.assignee"
        ><b>{{ "ASSIGNEE" | translate }}: </b>{{ documentation.assignee }}<br
      /></small>

      <small *ngIf="documentation.candidateGroups"
        ><b>{{ "CADIDATE_GROUP" | translate }}: </b
        >{{ documentation.candidateGroups }}<br
      /></small>

      <small *ngIf="documentation.dueDate"
        ><b>{{ "DUEDATE" | translate }}: </b>{{ documentation.dueDate }}<br
      /></small>
      <hr />
    </ng-container>

    <p-scrollTop
      target="parent"
      styleClass="custom-scrolltop"
      [threshold]="100"
      icon="pi pi-arrow-up"
    />
  </div>
</div>
